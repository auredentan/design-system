<table
    class="lumx-data-table"
    ng-class="{ 'lumx-data-table--has-border': lumx.hasBorder,
                'lumx-data-table--has-bulk': lumx.hasBulk,
                'lumx-data-table--has-thumbnail': lumx.hasThumbnail,
                'lumx-data-table--is-activable': lumx.isActivable,
                'lumx-data-table--is-selectable': lumx.isSelectable,
                'lumx-data-table--theme-light': !lumx.theme || lumx.theme === 'light',
                'lumx-data-table--theme-dark': lumx.theme === 'dark' }"
>
    <thead>
        <tr
            class="lumx-data-table__row lumx-data-table__row--thead"
            ng-class="{ 'lumx-data-table__row--is-selected': lumx.hasBulk && lumx.isSelectable && lumx.allRowsSelected }"
        >
            <th align="center" class="lumx-data-table__cell lumx-data-table__cell--thead" ng-if="::lumx.hasThumbnail">
                <lumx-checkbox
                    class="lumx-data-table__checkbox"
                    lumx-theme="{{ lumx.theme }}"
                    ng-checked="lumx.allRowsSelected"
                    ng-click="lumx.toggleAllSelected()"
                    ng-if="::lumx.hasBulk && lumx.isSelectable"
                ></lumx-checkbox>
            </th>
            <th
                align="center"
                class="lumx-data-table__cell lumx-data-table__cell--thead"
                ng-if="::lumx.isSelectable && !lumx.hasThumbnail"
            >
                <lumx-checkbox
                    class="lumx-data-table__checkbox"
                    lumx-theme="{{ lumx.theme }}"
                    ng-checked="lumx.allRowsSelected"
                    ng-click="lumx.toggleAllSelected()"
                    ng-if="lumx.hasBulk"
                ></lumx-checkbox>
            </th>
            <th
                align="left"
                class="lumx-data-table__cell lumx-data-table__cell--thead"
                ng-class=" { 'lumx-data-table__cell--is-sortable': th.sortable,
                             'lumx-data-table__cell--is-sorted': th.sortable && th.sort }"
                ng-click="lumx.sort(th)"
                ng-repeat="th in lumx.thead track by $index"
                ng-if="!lumx.hasThumbnail || (lumx.hasThumbnail && $index != 0)"
            >
                <lumx-icon lumx-path="{{ th.icon }}" lumx-size="xxs" ng-if="th.icon && !th.sortable"></lumx-icon>
                <lumx-icon
                    lumx-path="{{ lumx.icons.mdiArrowUp }}"
                    lumx-size="xxs"
                    ng-if="th.sortable && th.sort === 'asc'"
                ></lumx-icon>
                <lumx-icon
                    lumx-path="{{ lumx.icons.mdiArrowDown }}"
                    lumx-size="xxs"
                    ng-if="th.sortable && th.sort === 'desc'"
                ></lumx-icon>
                <span>{{ th.label }}</span>
            </th>
        </tr>
    </thead>

    <tbody>
        <tr
            class="lumx-data-table__row lumx-data-table__row--tbody"
            ng-class="{ 'lumx-data-table__row--is-enabled': lumx.isSelectable && !tr.lumxDataTableDisabled,
                        'lumx-data-table__row--is-disabled': lumx.isSelectable && tr.lumxDataTableDisabled,
                        'lumx-data-table__row--is-selected': lumx.isSelectable && tr.lumxDataTableSelected,
                        'lumx-data-table__row--is-activated': lumx.isActivable && tr.lumxDataTableActivated }"
            ng-repeat="tr in lumx.tbody"
            ng-click="lumx.toggleActivation(tr)"
        >
            <td align="center" class="lumx-data-table__cell lumx-data-table__cell--tbody" ng-if="::lumx.hasThumbnail">
                <div class="lumx-data-table__thumbnail">
                    <lumx-thumbnail
                        lumx-image="{{ tr[lumx.thead[0].name] }}"
                        lumx-variant="{{ lumx.thead[0].variant }}"
                    ></lumx-thumbnail>
                </div>

                <lumx-checkbox
                    class="lumx-data-table__checkbox"
                    lumx-theme="{{ lumx.theme }}"
                    ng-checked="tr.lumxDataTableSelected"
                    ng-click="lumx.toggleSelection(tr, undefined, $event)"
                    ng-if="lumx.isSelectable && !tr.lumxDataTableDisabled"
                ></lumx-checkbox>
            </td>
            <td
                align="center"
                class="lumx-data-table__cell lumx-data-table__cell--tbody"
                ng-if="::lumx.isSelectable && !lumx.hasThumbnail"
            >
                <lumx-checkbox
                    class="lumx-data-table__checkbox"
                    lumx-theme="{{ lumx.theme }}"
                    ng-checked="tr.lumxDataTableSelected"
                    ng-click="lumx.toggleSelection(tr, undefined, $event)"
                    ng-disabled="tr.lumxDataTableDisabled"
                ></lumx-checkbox>
            </td>
            <td
                align="left"
                class="lumx-data-table__cell lumx-data-table__cell--tbody"
                ng-repeat="th in lumx.thead track by $index"
                ng-if="!lumx.hasThumbnail || (lumx.hasThumbnail && $index != 0)"
            >
                <span ng-if="!th.format">{{ tr[th.name] }}</span>
                <div ng-if="th.format" ng-bind-html="lumx.$sce.trustAsHtml(th.format(tr))"></div>
            </td>
        </tr>
    </tbody>
</table>
